<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bingo Snacks Order Form</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 700px; margin: 20px auto; }
  h1, h2 { border-bottom: 2px solid #333; padding-bottom: 5px; }
  .category { margin-bottom: 30px; }
  .flavour { margin-bottom: 15px; }
  .item { display: flex; justify-content: space-between; align-items: center; margin: 5px 0; }
  label { flex: 2; }
  .price { flex: 1; text-align: center; }
  input[type=number] { width: 60px; padding: 5px; flex: 1; }
  .total { font-weight: bold; font-size: 1.3em; margin-top: 30px; text-align: right; }
  button { margin-top: 20px; padding: 10px 25px; font-size: 1.1em; }
</style>
</head>
<body>

<h1>Bingo Snacks Order Form</h1>

<form id="orderForm">

  <div class="category">
    <h2>Tedhe Mede</h2>

    <div class="flavour">
      <h3>Masala</h3>
      <div class="item">
        <label for="tedhe-masala-5">MRP ₹5</label>
        <div class="price">₹5</div>
        <input type="number" id="tedhe-masala-5" name="tedhe-masala-5" min="0" value="0" />
      </div>
      <div class="item">
        <label for="tedhe-masala-10">MRP ₹10</label>
        <div class="price">₹10</div>
        <input type="number" id="tedhe-masala-10" name="tedhe-masala-10" min="0" value="0" />
      </div>
      <div class="item">
        <label for="tedhe-masala-20">MRP ₹20</label>
        <div class="price">₹20</div>
        <input type="number" id="tedhe-masala-20" name="tedhe-masala-20" min="0" value="0" />
      </div>
      <div class="item">
        <label for="tedhe-masala-50">MRP ₹50</label>
        <div class="price">₹50</div>
        <input type="number" id="tedhe-masala-50" name="tedhe-masala-50" min="0" value="0" />
      </div>
    </div>

    <div class="flavour">
      <h3>Extra Teekha</h3>
      <div class="item">
        <label for="tedhe-teekha-5">MRP ₹5</label>
        <div class="price">₹5</div>
        <input type="number" id="tedhe-teekha-5" name="tedhe-teekha-5" min="0" value="0" />
      </div>
      <div class="item">
        <label for="tedhe-teekha-10">MRP ₹10</label>
        <div class="price">₹10</div>
        <input type="number" id="tedhe-teekha-10" name="tedhe-teekha-10" min="0" value="0" />
      </div>
      <div class="item">
        <label for="tedhe-teekha-20">MRP ₹20</label>
        <div class="price">₹20</div>
        <input type="number" id="tedhe-teekha-20" name="tedhe-teekha-20" min="0" value="0" />
      </div>
      <div class="item">
        <label for="tedhe-teekha-50">MRP ₹50</label>
        <div class="price">₹50</div>
        <input type="number" id="tedhe-teekha-50" name="tedhe-teekha-50" min="0" value="0" />
      </div>
    </div>
  </div>

  <div class="category">
    <h2>Nachos</h2>

    <div class="flavour">
      <h3>Cheese</h3>
      <div class="item">
        <label for="nachos-cheese-5">MRP ₹5</label>
        <div class="price">₹5</div>
        <input type="number" id="nachos-cheese-5" name="nachos-cheese-5" min="0" value="0" />
      </div>
      <div class="item">
        <label for="nachos-cheese-10">MRP ₹10</label>
        <div class="price">₹10</div>
        <input type="number" id="nachos-cheese-10" name="nachos-cheese-10" min="0" value="0" />
      </div>
      <div class="item">
        <label for="nachos-cheese-20">MRP ₹20</label>
        <div class="price">₹20</div>
        <input type="number" id="nachos-cheese-20" name="nachos-cheese-20" min="0" value="0" />
      </div>
      <div class="item">
        <label for="nachos-cheese-50">MRP ₹50</label>
        <div class="price">₹50</div>
        <input type="number" id="nachos-cheese-50" name="nachos-cheese-50" min="0" value="0" />
      </div>
    </div>

    <div class="flavour">
      <h3>Chilli Limon</h3>
      <div class="item">
        <label for="nachos-chilli-5">MRP ₹5</label>
        <div class="price">₹5</div>
        <input type="number" id="nachos-chilli-5" name="nachos-chilli-5" min="0" value="0" />
      </div>
      <div class="item">
        <label for="nachos-chilli-10">MRP ₹10</label>
        <div class="price">₹10</div>
        <input type="number" id="nachos-chilli-10" name="nachos-chilli-10" min="0" value="0" />
      </div>
      <div class="item">
        <label for="nachos-chilli-20">MRP ₹20</label>
        <div class="price">₹20</div>
        <input type="number" id="nachos-chilli-20" name="nachos-chilli-20" min="0" value="0" />
      </div>
      <div class="item">
        <label for="nachos-chilli-50">MRP ₹50</label>
        <div class="price">₹50</div>
        <input type="number" id="nachos-chilli-50" name="nachos-chilli-50" min="0" value="0" />
      </div>
    </div>
  </div>

  <div class="total">
    Total Amount: ₹<span id="totalAmount">0</span>
  </div>

  <button type="submit">Place Order</button>
</form>

<script>
  const prices = {
    "tedhe-masala-5": 5,
    "tedhe-masala-10": 10,
    "tedhe-masala-20": 20,
    "tedhe-masala-50": 50,
    "tedhe-teekha-5": 5,
    "tedhe-teekha-10": 10,
    "tedhe-teekha-20": 20,
    "tedhe-teekha-50": 50,
    "nachos-cheese-5": 5,
    "nachos-cheese-10": 10,
    "nachos-cheese-20": 20,
    "nachos-cheese-50": 50,
    "nachos-chilli-5": 5,
    "nachos-chilli-10": 10,
    "nachos-chilli-20": 20,
    "nachos-chilli-50": 50
  };

  const inputs = document.querySelectorAll('input[type=number]');
  const totalAmountSpan = document.getElementById('totalAmount');
  const orderForm = document.getElementById('orderForm');

  function calculateTotal() {
    let total = 0;
    inputs.forEach(input => {
      const qty = parseInt(input.value) || 0;
      const price = prices[input.id] || 0;
      total += qty * price;
    });
    totalAmountSpan.textContent = total;
  }

  inputs.forEach(input => {
    input.addEventListener('input', calculateTotal);
  });

  orderForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const orderData = {};

    let hasOrder = false;
    inputs.forEach(input => {
      const qty = parseInt(input.value) || 0;
      if (qty > 0) {
        hasOrder = true;
        orderData[input.name] = qty;
      }
    });

    if (!hasOrder) {
      alert("Please enter quantity for at least one item.");
      return;
    }

    orderData.totalAmount = totalAmountSpan.textContent;
    orderData.timestamp = new Date().toISOString();

    const url = 'https://script.google.com/macros/s/AKfycbxDKd0KW89XDz7BmhGuOwyKDdssyS6rw6_iCLJv2MIx0Hc-6T4eHSbmggI54Z3BPA7u/exec'; // Replace with your actual Apps Script URL

    const data = new URLSearchParams();
    for (const [key, value] of Object.entries(orderData)) {
      data.append(key, value);
    }

    try {
      const response = await fetch(url, {
        method: 'POST',
        body: data
      });
      const result = await response.json();

      if (result.result === "success") {
        alert("Order placed successfully!");
        orderForm.reset();
        calculateTotal();
      } else {
        alert("Failed to place order. Please try again.");
      }
    } catch (error) {
      alert("Error submitting order. Please check your internet connection.");
      console.error(error);
    }
  });

  calculateTotal();
</script>

</body>
</html>
